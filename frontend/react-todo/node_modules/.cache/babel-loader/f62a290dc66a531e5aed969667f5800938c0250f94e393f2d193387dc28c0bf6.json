{"ast":null,"code":"// Import useState and useEffect hooks from React\nimport{useState,useEffect}from'react';// Import the CSS file\nimport'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const API_URL=process.env.REACT_APP_API_URL||\"http://localhost:5000\";// State variable to store task name input\nconst[task_name,setTask_name]=useState(\"\");// State variable to store list of tasks\nconst[tasks,setTasks]=useState([]);// Function to handle form submission\nconst onSubmitForm=async e=>{// Prevent default form submission behavior\ne.preventDefault();try{// Create request body with task_name\nconst body={task_name};await fetch(\"\".concat(API_URL,\"/task\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)});window.location=\"/\";}catch(err){// Log any errors to the console\nconsole.error(err.message);}};// Function to delete a task by its ID\nconst deleteTask=async taskId=>{console.log(taskId);try{const response=await fetch(\"\".concat(API_URL,\"/task/\").concat(taskId),{method:\"DELETE\"});if(response.ok){// Remove the deleted task from the state\nsetTasks(tasks.filter(task=>task.TaskID!==taskId));}else{console.error(\"Failed to delete task\");}}catch(error){console.error(error.message);}};// Effect hook to fetch all tasks when the component mounts\nuseEffect(()=>{// Fetch all tasks when the component mounts\nconst fetchTasks=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/allTasks\"),{method:\"GET\"});const data=await response.json();setTasks(data);}catch(error){console.error(error.message);}};// Call fetchTasks function\nfetchTasks();},[]);return/*#__PURE__*/ (// Container for the entire application\n_jsx(\"div\",{className:\"container pt-5  w-75\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" todo-container  border border-light border-2 rounded-4 p-4  mt-5 mb-5  shadow \",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center  text-light fw-bold mb-4 \",children:\"ToDo List\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:onSubmitForm,className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-0 \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-9 col-sm-10  col-md-10 col-lg-11\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:task_name,required:true,className:\" task-input text-center form-control\",placeholder:\"Enter Task\",onChange:e=>setTask_name(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3 col-sm-2  col-md-2 col-lg-1\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn fw-bold  add-button w-100  border  border-secondary-subtle  \",children:\"Add\"})})]})}),/*#__PURE__*/_jsx(\"ul\",{className:\"task-list \",children:tasks.map(task=>/*#__PURE__*/_jsxs(\"li\",{className:\"task-item text-light border border-1 border-secondary-subtle rounded-2  d-flex justify-content-between  mb-3\",children:[\" \".concat(task.Task),/*#__PURE__*/_jsx(\"i\",{className:\"fa-regular fa-trash-can trash-can me-2\",onClick:()=>{deleteTask(task.TaskID);}})]},task.TaskID))})]})}));}export default App;","map":{"version":3,"names":["useState","useEffect","jsx","_jsx","jsxs","_jsxs","App","API_URL","process","env","REACT_APP_API_URL","task_name","setTask_name","tasks","setTasks","onSubmitForm","e","preventDefault","body","fetch","concat","method","headers","JSON","stringify","window","location","err","console","error","message","deleteTask","taskId","log","response","ok","filter","task","TaskID","fetchTasks","data","json","className","children","onSubmit","type","value","required","placeholder","onChange","target","map","Task","onClick"],"sources":["C:/xampp/htdocs/projet_cloud/to-do/frontend/react-todo/src/App.js"],"sourcesContent":["// Import useState and useEffect hooks from React\r\nimport { useState, useEffect } from 'react';\r\n\r\n// Import the CSS file\r\nimport './App.css';\r\n\r\nfunction App() {\r\n    const API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\r\n    // State variable to store task name input\r\n    const [task_name, setTask_name] = useState(\"\");\r\n\r\n    // State variable to store list of tasks\r\n    const [tasks, setTasks] = useState([]);\r\n\r\n    // Function to handle form submission\r\n    const onSubmitForm = async e => {\r\n        // Prevent default form submission behavior\r\n        e.preventDefault();\r\n\r\n        try {\r\n            // Create request body with task_name\r\n            const body = { task_name };\r\n            await fetch(`${API_URL}/task`, { \r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(body)\r\n            });\r\n            window.location = \"/\";\r\n\r\n        } catch (err) {\r\n            // Log any errors to the console\r\n            console.error(err.message);\r\n        }\r\n    }\r\n\r\n    // Function to delete a task by its ID\r\n       const deleteTask = async (taskId) => {\r\n        console.log(taskId);\r\n        try {\r\n            const response = await fetch(`${API_URL}/task/${taskId}`, { method: \"DELETE\" });\r\n            if (response.ok) {\r\n                // Remove the deleted task from the state\r\n                setTasks(tasks.filter(task => task.TaskID !== taskId));\r\n            } else {\r\n                console.error(\"Failed to delete task\");\r\n            }\r\n        } catch (error) {\r\n            console.error(error.message);\r\n        }\r\n    };\r\n\r\n    // Effect hook to fetch all tasks when the component mounts\r\n    useEffect(() => {\r\n        // Fetch all tasks when the component mounts\r\n        const fetchTasks = async () => {\r\n            try {\r\n                const response = await fetch(`${API_URL}/allTasks`, { method: \"GET\" });\r\n\r\n                const data = await response.json();\r\n                setTasks(data);\r\n            } catch (error) {\r\n                console.error(error.message);\r\n            }\r\n        };\r\n\r\n        // Call fetchTasks function\r\n        fetchTasks();\r\n    }, []);\r\n\r\n    return (\r\n        // Container for the entire application\r\n        <div className=\"container pt-5  w-75\" >\r\n\r\n            {/* Container for the todo list section*/}\r\n            <div className=' todo-container  border border-light border-2 rounded-4 p-4  mt-5 mb-5  shadow '>\r\n\r\n                {/* Header */}\r\n                <h2 className='text-center  text-light fw-bold mb-4 '>ToDo List</h2>\r\n\r\n                {/* Form for adding a new task, onSubmitForm function triggered on submit */}\r\n                <form onSubmit={onSubmitForm} className='mb-4'>\r\n                    <div className=\"row g-0 \">\r\n                        <div className=\"col-9 col-sm-10  col-md-10 col-lg-11\">\r\n                            <input type=\"text\" value={task_name} required className=\" task-input text-center form-control\" placeholder=\"Enter Task\" onChange={(e) => setTask_name(e.target.value)} />\r\n                        </div>\r\n                        <div className=\"col-3 col-sm-2  col-md-2 col-lg-1\">\r\n\r\n                            {/* Button to add task */}\r\n                            <button type=\"submit\" className='btn fw-bold  add-button w-100  border  border-secondary-subtle  '>Add</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                </form>\r\n\r\n                <ul className=\"task-list \">\r\n\r\n                    {/* Mapping through tasks array to display each task */}\r\n                    {tasks.map(task => (\r\n                        <li key={task.TaskID}\r\n                            className=\"task-item text-light border border-1 border-secondary-subtle rounded-2  d-flex justify-content-between  mb-3\"\r\n                        >\r\n                            {` ${task.Task}`}\r\n                            <i className=\"fa-regular fa-trash-can trash-can me-2\"\r\n                                onClick={() => { deleteTask(task.TaskID) }}></i>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n\r\n}\r\nexport default App;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}